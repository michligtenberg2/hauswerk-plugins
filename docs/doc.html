<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hauswerk Documentatie</title>
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="doc.css">
  <script defer>
    // Dark mode toggle
    function toggleDarkMode() {
      const root = document.documentElement;
      const mode = root.classList.toggle('dark') ? 'dark' : 'light';
      localStorage.setItem('hauswerk-theme', mode);
    }
    document.addEventListener('DOMContentLoaded', () => {
      if (localStorage.getItem('hauswerk-theme') === 'dark') {
        document.documentElement.classList.add('dark');
      }
      document.getElementById('menu-toggle').addEventListener('click', () => {
        document.querySelector('.nav-links').classList.toggle('show');
      });
    });
  </script>
  <style>
    /* Inhoudsopgave styling */
    .toc { margin: 1rem 0; padding: 1rem; background: var(--background-alt); border-radius: 8px; }
    .toc ul { list-style: none; padding-left: 0; }
    .toc li { margin: 0.5rem 0; }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-brand">Hauswerk</div>
    <button id="menu-toggle" class="mobile-toggle" aria-label="Toon menu">☰</button>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="plugin_browser.html">Browser</a>
      <a href="viewer.html">Viewer</a>
      <a href="doc.html" aria-current="page">Docs</a>
      <button onclick="toggleDarkMode()" aria-label="Schakel donkere modus">🌓</button>
    </div>
  </nav>

  <div class="container">
    <main>
      <header>
        <h1>🪝 Documentatie</h1>
        <p>Complete gids voor Hauswerk-plugins: structuur, gebruik, API-referentie en meer.</p>
      </header>

      <!-- Inhoudsopgave -->
      <nav class="toc">
        <strong>Inhoudsopgave</strong>
        <ul>
          <li><a href="#intro">Introductie</a></li>
          <li><a href="#supabase">Wat bevat Supabase?</a></li>
          <li><a href="#zip">ZIP Structuur</a></li>
          <li><a href="#quickstart">Quick Start</a></li>
          <li><a href="#api">API Referentie</a></li>
          <li><a href="#troubleshoot">Troubleshooting</a></li>
          <li><a href="#contribute">Contributie</a></li>
          <li><a href="#license">Licentie & Support</a></li>
        </ul>
      </nav>

      <section id="intro">
        <h2>Introductie</h2>
        <p>Welkom in de officiële documentatie voor <strong>Hauswerk Plugins</strong>. Hier leer je hoe je plugins ontwikkelt, uploadt, en integreert met de Hauswerk GUI.</p>
      </section>

      <section id="supabase">
        <h2>📦 Wat bevat Supabase?</h2>
        <ul>
          <li>Één <code>.py</code>-bestand met een <code>QWidget</code>-subklasse</li>
          <li><code>plugin.json</code> met metadata (entry, class, tags, etc.)</li>
          <li>Optioneel: <code>.svg</code>-icoon en <code>preview.png</code></li>
          <li>SHA256-checksum en automatische validatie</li>
          <li>Downloadbaar <code>.hauswerk-plugin.zip</code></li>
        </ul>
      </section>

      <section id="zip">
        <h2>🔍 ZIP Structuur</h2>
        <pre><code>{
  "name": "Collage",
  "entry": "collage.py",
  "class": "CollageWidget",
  "tags": ["video", "overlay"],
  "verified": true,
  "slug": "collage",
  "icon": "collage.svg",
  "preview": "collage.png",
  "download_url": "https://.../collage.hauswerk-plugin.zip"
}</code></pre>
      </section>

      <section id="quickstart">
        <h2>🚀 Quick Start</h2>
        <p>Volg deze stappen om snel een plugin te installeren:</p>
        <ol>
          <li>Open Hauswerk en ga naar de Plugin Store.</li>
          <li>Zoek naar <strong>Collage</strong> en klik op <em>Installeren</em>.</li>
          <li>Herstart de applicatie; de plugin verschijnt in je menu.</li>
        </ol>
        <p>Voor ontwikkeling gebruik je:</p>
        <pre><code>hauswerk plugin new --name MijnPlugin</code></pre>
      </section>

      <section id="api">
        <h2>🛠️ API Referentie</h2>
        <h3>upload_plugin_to_supabase.py</h3>
        <p>CLI-tool voor upload:</p>
        <pre><code>usage: upload_plugin_to_supabase.py --bucket BUCKET --file ZIPFILE</code></pre>
        <p><strong>Parameters:</strong></p>
        <ul>
          <li><code>--bucket</code>: naam van de Supabase-bucket</li>
          <li><code>--file</code>: pad naar de plugin ZIP</li>
        </ul>

        <h3>plugin_browser.js</h3>
        <p>Belangrijke functies:</p>
        <ul>
          <li><code>fetchPlugins()</code>: haalt lijst op via <code>/rest/v1/plugins</code></li>
          <li><code>renderPlugin(item)</code>: maakt DOM-elementen voor elke plugin</li>
        </ul>
      </section>

      <section id="troubleshoot"><!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hauswerk Documentatie</title>
  <!-- Externe CSS -->
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="doc.css">
  <script defer>
    const root = document.documentElement;
    const menuBtn = document.getElementById('menu-toggle');
    const navLinks = document.querySelector('.nav-links');

    function toggleDarkMode() {
      root.classList.toggle('dark');
      localStorage.setItem('hauswerk-theme', root.classList.contains('dark') ? 'dark' : 'light');
    }

    document.addEventListener('DOMContentLoaded', () => {
      if (localStorage.getItem('hauswerk-theme') === 'dark') {
        root.classList.add('dark');
      }
      menuBtn.addEventListener('click', () => navLinks.classList.toggle('show'));
    });
  </script>
</head>
<body>
  <nav class="navbar">
    <div class="nav-brand">Hauswerk</div>
    <button id="menu-toggle" class="mobile-toggle" aria-label="Toon menu">☰</button>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="plugin_browser.html">Browser</a>
      <a href="viewer.html">Viewer</a>
      <a href="doc.html">Docs</a>
      <button onclick="toggleDarkMode()" aria-label="Schakel donker modus">🌓</button>
    </div>
  </nav>

  <div class="container">
    <main>
      <header>
        <h1>🪝 Documentatie</h1>
        <p>🌐 Beschikbare talen:
          <a href="README.md">Nederlands</a> |
          <a href="README_EN.md">English</a> |
          <a href="README_DE.md">Deutsch</a> |
          <a href="README_FR.md">Français</a> |
          <a href="README_ZH.md">中文</a>
        </p>
      </header>

      <table>
        <caption>Overzicht van beschikbare plugins</caption>
        <thead>
          <tr><th>Plugin</th><th>Count</th><th>Source</th><th>License</th></tr>
        </thead>
        <tbody>
          <!-- Dynamisch geladen via Supabase -->
        </tbody>
      </table>

      <section>
        <p>Welkom in de documentatie van <strong>Hauswerk Plugins</strong>. Deze pagina legt uit hoe de Supabase-pluginstructuur werkt, hoe je zelf plugins maakt, uploadt en zichtbaar maakt in de Plugin Browser van Hauswerk. Of je nu een ontwikkelaar bent of een enthousiaste gebruiker, hier vind je alle info om mee te bouwen aan een modulair ecosysteem.</p>

        <p>Alle plugins worden dynamisch geladen vanuit Supabase. Wijzigingen, nieuwe uploads en updates zijn direct beschikbaar in de Plugin Store-tab binnen de Hauswerk-app, zonder handmatig bijwerken.</p>

        <h2>📦 Wat bevat Supabase?</h2>
        <ul>
          <li>✅ Één <code>.py</code> bestand met een <code>QWidget</code> subclass</li>
          <li>✅ Een <code>plugin.json</code> bestand met metadata (entry, class, tags, etc.)</li>
          <li>✅ Een <code>.svg</code> icoon (optioneel)</li>
          <li>✅ <code>preview.png</code> voor visuele weergave (optioneel)</li>
          <li>✅ SHA256 checksum + automatische validatie</li>
          <li>✅ Downloadbare <code>.hauswerk-plugin.zip</code></li>
        </ul>

        <h3>ZIP Structuur</h3>
        <pre><code>{
  "name": "Collage",
  "entry": "collage.py",
  "class": "CollageWidget",
  "tags": ["video", "overlay"],
  "verified": true,
  "slug": "collage",
  "icon": "collage.svg",
  "preview": "collage.png",
  "download_url": "https://.../collage.hauswerk-plugin.zip"
}</code></pre>

        <h2>🚀 Hoe gebruik ik Supabase plugins?</h2>
        <p>De Hauswerk GUI haalt live de pluginlijst op via de Supabase REST API. Open de Plugin Store in de applicatie — alles wordt automatisch geladen.</p>
        <p><code>plugin_browser.js</code> regelt ophalen, weergeven en downloaden van plugins in de GUI, met een offline cache-optie.</p>

        <h2>🧪 Bijdragen aan Supabase Store</h2>
        <h3>Uploadstructuur</h3>
        <ul>
          <li>🔐 Upload naar <em>official</em> (via review)</li>
          <li>Kompleet werkende plugin</li>
          <li>Validatie door maintainer</li>
          <li>Metadata + preview vereist</li>
        </ul>
        <p>Wordt gemarkeerd als <code>verified: true</code> en verschijnt bovenaan in zoekresultaten.</p>

        <h3>Zelf uploaden via Python</h3>
        <pre><code>python upload_plugin_to_supabase.py \
  --bucket hauswerk.unofficial \
  --file mijnplugin.hauswerk-plugin.zip</code></pre>
        <ul>
          <li>Valideert <code>plugin.json</code> inhoud</li>
          <li>Genereert automatisch slug, SHA256 en metadata</li>
          <li>Voegt <code>preview.png</code> toe als aanwezig</li>
          <li>Uploadt veilig naar Supabase Storage</li>
        </ul>

        <h3>Eigen store opzetten?</h3>
        <p>In de GUI kun je alternatieve bronnen toevoegen, zoals je eigen Supabase project of een JSON endpoint. Zolang het JSON-formaat gelijk blijft, werkt het direct.</p>

        <h2>🧰 Plugin ZIP Structuur</h2>
        <pre><code>📦 mijnplugin.hauswerk-plugin.zip
├── plugin.json
├── mijnplugin.py
├── preview.png      # optioneel
└── icoon.svg        # optioneel</code></pre>
        <p>Voorbeeld <code>plugin.json</code>:</p>
        <pre><code>{
  "name": "Mijn Plugin",
  "entry": "mijnplugin.py",
  "class": "MijnPluginWidget",
  "tags": ["audio", "fx"],
  "verified": false
}</code></pre>

        <h2>🛡️ Automatische validatie</h2>
        <ul>
          <li>Controle op verplichte velden</li>
          <li>Controle of <code>.py</code>-bestand en class overeenkomen met metadata</li>
          <li>Bestaat de preview/icoon daadwerkelijk?</li>
          <li>ZIP-structuur compleet en correct</li>
        </ul>

        <h2>📡 Supabase Plugin Browser in GUI</h2>
        <p>Hauswerk maakt live een JSON-API request naar:</p>
        <pre><code>fetch("https://izlcnpelomuuwxijnnuh.supabase.co/rest/v1/plugins")</code></pre>
        <p>Elke plugin wordt weergegeven met titel, tags, preview en downloadknop. Er zijn filter- en validatie-opties voor officiële en unofficial plugins.</p>

        <h2>🤝 Contributie</h2>
        <ul>
          <li>Draag een officiële plugin aan via GitHub of direct contact.</li>
          <li>Upload naar <code>hauswerk.unofficial</code> voor laagdrempelig bijdragen.</li>
        </ul>

        <h2>📫 Contact / Hulp</h2>
        <p>Open een issue op <a href="https://github.com/michligtenberg2/Hauswerk" target="_blank" rel="noopener">GitHub</a> of gebruik de uploader in de app.</p>
      </section>

    </main>
  </div>

  <footer>
    <div class="container">
      <p>&copy; 2025 Hauswerk. Gemaakt met liefde en plugins.</p>
    </div>
  </footer>
</body>
</html>
        <h2>⚠️ Troubleshooting</h2>
        <p><strong>Checksum mismatch:</strong> controleer of de ZIP niet beschadigd is.</p>
        <p><strong>Network errors:</strong> zorg voor internettoegang en correcte CORS-configuratie.</p>
      </section>

      <section id="contribute">
        <h2>🤝 Contributie</h2>
        <p>Wil je bijdragen? Fork de repo en maak een pull request volgens onze <code>CONTRIBUTING.md</code>.</p>
        <p>Gebruik issue-templates voor bugs en feature requests.</p>
      </section>

      <section id="license">
        <h2>📜 Licentie & Support</h2>
        <p>Dit project valt onder de MIT-licentie. Zie <code>LICENSE</code> voor details.</p>
        <p>Voor hulp en vragen, bezoek <a href="https://github.com/michligtenberg2/Hauswerk">GitHub</a> of stuur een e-mail naar support@hauswerk.app.</p>
      </section>

    </main>
  </div>

  <footer>
    <div class="container">
      <p>&copy; 2025 Hauswerk. Gemaakt met liefde en plugins.</p>
    </div>
  </footer>
</body>
</html>

<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hauswerk Supabase Plugins</title>
  <link rel="stylesheet" href="theme.css">
</head>
<body>
  <div class="container">
    <main>
      <h1>🪝 Documentatie</h1>

      <p><strong>🌐 Beschikbare talen:</strong> <a href="README.md">Nederlands</a> | <a href="docs/README_EN.md">English</a> | <a href="docs/README_DE.md">Deutsch</a> | <a href="docs/README_FR.md">Français</a> | <a href="docs/README_ZH.md">中文</a></p>

      <p>
        <img src="https://img.shields.io/badge/plugins-dynamic-lightgrey?label=via%20Supabase" alt="Plugin Count">
        <img src="https://img.shields.io/badge/store-Supabase-green" alt="Source">
        <img src="https://img.shields.io/github/license/michligtenberg2/Hauswerk-Plugins" alt="License">
      </p>

      <p>Welkom in de documentatie van Hauswerk Plugins. Deze pagina legt uit hoe de Supabase-pluginstructuur werkt, hoe je zelf plugins maakt, uploadt, en ze zichtbaar maakt in de Plugin Browser van Hauswerk. Of je nu een ontwikkelaar bent of gewoon een enthousiaste gebruiker, je vindt hier alle info om mee te bouwen aan een modulair ecosysteem.</p>

      <p>Alle plugins worden dynamisch geladen vanuit Supabase. Hierdoor zijn wijzigingen, nieuwe uploads en updates direct beschikbaar in de Plugin Store-tab binnen de Hauswerk-app, zonder handmatig het pluginoverzicht te hoeven bijwerken.</p>

      <h2>📦 Wat bevat Supabase?</h2>
      <ul>
        <li>✅ Één <code>.py</code> bestand met een <code>QWidget</code> subclass</li>
        <li>✅ Een <code>plugin.json</code> bestand met metadata (entry, class, tags, etc.)</li>
        <li>✅ Een <code>.svg</code> icoon (optioneel)</li>
        <li>✅ <code>preview.png</code> voor visuele weergave (optioneel)</li>
        <li>✅ SHA256 checksum + automatische validatie</li>
        <li>✅ Downloadbare <code>.hauswerk-plugin.zip</code></li>
      </ul>

      <img src="uitleg.svg" alt="ZIP structuur" style="max-width:100%; margin: 1rem 0;">

      <pre><code>{
  "name": "Collage",
  "entry": "collage.py",
  "class": "CollageWidget",
  "tags": ["video", "overlay"],
  "verified": true,
  "slug": "collage",
  "icon": "collage.svg",
  "preview": "collage.png",
  "download_url": "https://izlcnpelomuuwxijnnuh.supabase.co/storage/v1/object/public/hauswerk.unofficial/collage.hauswerk-plugin.zip"
}</code></pre>

      <h2>🚀 Hoe gebruik ik Supabase plugins?</h2>
      <p>De Hauswerk GUI haalt live de pluginlijst op via de Supabase API. Je hoeft enkel de <strong>Plugin Store</strong> te openen binnen de applicatie — de rest gebeurt vanzelf.</p>

      <p><code>plugin_browser.js</code> regelt het ophalen, weergeven, en downloaden van plugins in de GUI.</p>

      <blockquote>✅ Offline cache-optie is ook beschikbaar voor beperkte toegang zonder internet.</blockquote>

      <img src="uitleg3.svg" alt="Plugin GUI voorbeeld" style="max-width:100%; margin: 1rem 0;">

      <h2>🧪 Bijdragen aan Supabase Store</h2>
      <p>Er zijn twee hoofdstructuren waarin je je plugin kunt publiceren:</p>

      <img src="uitleg2.svg" alt="Uploadstructuur" style="max-width:100%; margin: 1rem 0;">

      <h3>🔐 Upload naar <code>official</code> (via review)</h3>
      <ul>
        <li>Compleet werkende plugin</li>
        <li>Validatie door maintainer</li>
        <li>Metadata + preview vereist</li>
      </ul>
      <p>Wordt gemarkeerd als <code>verified: true</code> en verschijnt bovenaan in zoekresultaten.</p>

      <h2>📤 Zelf uploaden via Python</h2>
      <p>Gebruik <code>supabase-py</code> + <code>hauswerk-utils</code> of de ingebouwde uploader in de GUI:</p>

      <pre><code>python upload_plugin_to_supabase.py \
  --bucket hauswerk.unofficial \
  --file mijnplugin.hauswerk-plugin.zip</code></pre>

      <p>De uploader voert o.a. deze stappen uit:</p>
      <ul>
        <li>Valideert <code>plugin.json</code> inhoud</li>
        <li>Genereert automatisch een <code>slug</code>, SHA256 en metadata</li>
        <li>Voegt <code>preview.png</code> toe als aanwezig</li>
        <li>Uploadt veilig naar Supabase Storage</li>
      </ul>

      <h2>💡 Eigen store opzetten?</h2>
      <p>In de GUI kun je alternatieve bronnen toevoegen, zoals je eigen Supabase project of een JSON endpoint. Zolang het JSON-formaat gelijk blijft, werkt het direct.</p>

      <h2>🧰 Plugin ZIP Structuur</h2>
      <pre><code>📦 mijnplugin.hauswerk-plugin.zip
├── plugin.json
├── mijnplugin.py
├── preview.png      # optioneel
├── icoon.svg        # optioneel</code></pre>

      <p><code>plugin.json</code> bevat bijvoorbeeld:</p>
      <pre><code>{
  "name": "Mijn Plugin",
  "entry": "mijnplugin.py",
  "class": "MijnPluginWidget",
  "tags": ["audio", "fx"],
  "verified": false
}</code></pre>

      <h2>🛡️ Automatische validatie</h2>
      <ul>
        <li>Controle op verplichte velden</li>
        <li>Controle of <code>.py</code>-bestand en class overeenkomen met metadata</li>
        <li>Bestaat de preview/icoon daadwerkelijk?</li>
        <li>ZIP-structuur compleet en correct</li>
      </ul>

      <h2>📡 Supabase Plugin Browser in GUI</h2>
      <p>Hauswerk gebruikt een live JSON API request om plugins weer te geven:</p>
      <pre><code>fetch("https://izlcnpelomuuwxijnnuh.supabase.co/rest/v1/plugins")</code></pre>

      <p>Elke plugin wordt weergegeven met titel, tags, preview en downloadknop. Er is visuele feedback, validatie en filteropties voor officiële/unofficial plugins.</p>

      <h2>🤝 Contributie</h2>
      <ul>
        <li>Draag een officiële plugin aan via GitHub of direct contact.</li>
        <li>Liever laagdrempelig? Upload gewoon naar <code>hauswerk.unofficial</code>.</li>
      </ul>

      <h2>📫 Contact / Hulp</h2>
      <p>Open een issue op <a href="https://github.com/michligtenberg2/Hauswerk">github.com/michligtenberg2/Hauswerk</a> of gebruik de uploader in de app.</p>

      <hr>
      <p>🛠️ by M. Ligtenberg</p>
    </main>
  </div>
</body>
</html>
